.\" Automatically generated by Pandoc 2.0.6
.\"
.TH "passhole" "" "January 30, 2019" "" ""
.hy
.SH SYNOPSIS
.PP
\f[B]ph\f[] [OPTIONAL ARGS] [COMMAND] [COMMAND OPTIONS] [COMMAND ARGS]
.SH COMMANDS
.TP
.B show [\-h] [\-\-field FIELD] PATH
Show the contents of an entry, where \f[I]PATH\f[] is the full path to
the entry.
The password field is spoilered and must be highlighted to reveal the
plaintext password.
Use \-\-field \f[I]FIELD\f[] to print only the specified field, where
\f[I]FIELD\f[] is one of \[aq]title\[aq], \[aq]username\[aq],
\[aq]password\[aq], \[aq]url\[aq], or a custom field.
.RS
.RE
.TP
.B type [\-h] [\-\-tabbed] [\-\-username] [\-\-xdotool] PROG
Automatically type out the password as if the user had typed it on the
keyboard, where \f[I]PROG\f[] is a dmenu\-like program for selecting an
entry.
This is useful when you want to automatically fill a selected password
field in any application.
Use the \-\-tabbed option to type out the username then password,
separated by a tab.
Use the \-\-username option to show entry username in parenthesis during
selection.
Use the \-\-xdotool option to use xdotool instead of the Python keyboard
library.
Useful for handling unicode input.
Note that this command is intended to be invoked via keyboard shortcut.
.RS
.RE
.TP
.B add [\-h] [\-w [LENGTH] | \-a [LENGTH] | \-s [LENGTH]] [\-\-append STR] PATH
Add a new entry/group to the database, where \f[I]PATH\f[] is the full
path to the group or entry.
Use \-w, \-a, or \-s to generate a correct horse battery
staple (http://xkcd.com/936), alphanumeric, or alphanumeric + symbolic
password, respectively.
\f[I]LENGTH\f[] defaults to 5 words for \-w and 32 characters for \-a
and \-s unless otherwise specified.
Use \-\-append to append \f[I]STR\f[] to the end of the generated
password to meet specific password requirements.
.RS
.RE
.TP
.B remove [\-h] PATH
Remove an entry/group from the database, where \f[I]PATH\f[] is the full
path to the group or entry.
.RS
.RE
.TP
.B edit [\-h] [\-\-field FIELD | \-\-set FIELD VALUE | \-\-remove FIELD] PATH
Edit the contents of an entry, where \f[I]PATH\f[] is the full path to
the entry.
You will be prompted to edit each field value of the entry.
Use \-\-field \f[I]FIELD\f[] to edit only the specified field, where
\f[I]FIELD\f[] is one of \f[I]title\f[], \f[I]username\f[],
\f[I]password\f[], \f[I]url\f[], or a custom field.
Use \-\-set \f[I]FIELD VALUE\f[] to set the value of a field,
noninteractively.
Use \-\-remove \f[I]FIELD\f[] to remove an existing field.
.RS
.RE
.TP
.B move [\-h] SRC_PATH DEST_PATH
Move an entry/group to another path, where \f[I]SRC_PATH\f[] and
\f[I]DEST_PATH\f[] are the full paths to the source and destination
items.
Providing two entry paths or two group paths will move and rename the
group or entry.
.RS
.RE
.TP
.B list [\-h] [\-\-username] [PATH]
List entries/groups in the database, where \f[I]PATH\f[] is an optional
path to a group or entry.
Use the \-\-username option to show entry username in addition to title.
.RS
.RE
.TP
.B grep [\-h] [\-i] [\-\-field FIELD] PATTERN
List entries with titles matching a regex pattern, where
\f[I]PATTERN\f[] is an XSLT
style (https://www.xml.com/pub/a/2003/06/04/tr.html) regular expression.
Use the \-\-field \f[I]FIELD\f[] option to search other string fields,
where \f[I]FIELD\f[] is one of \f[I]title\f[], \f[I]username\f[],
\f[I]password\f[], \f[I]url\f[], or a custom field.
Use the \-i option to enable case insensitive searching.
.RS
.RE
.TP
.B init [\-h]
Create a new database.
You will be prompted for the database password and whether or not to use
a keyfile.
See \-\-database and \-\-keyfile to initialize in a non\-default
location.
.RS
.RE
.TP
.B dump [\-h]
Pretty print database XML to console.
Passwords will appear in plaintext.
.RS
.RE
.SH OPTIONAL ARGS
.TP
.B \-h, \-\-help
Print out a help message and exit.
Use in conjunction with a command for command\-specific help.
.RS
.RE
.TP
.B \-\-debug
Enable debug messages.
.RS
.RE
.TP
.B \-\-database PATH
Specify the path to the KeePass database when initializing, accessing or
modifying the database.
The config is ignored when this is given.
.RS
.RE
.TP
.B \-\-keyfile PATH
Specify the path to the keyfile when initializing, accessing or
modifying the database.
No effect if \-\-database is not given.
.RS
.RE
.TP
.B \-\-cache PATH
Specify location to cache password with gpg\-agent, where \f[I]PATH\f[]
is a location on the filesystem.
No effect if \-\-database is not given.
.RS
.RE
.TP
.B \-\-no\-password
Don\[aq]t prompt for a password when accessing or modifying the
database.
No effect if \-\-database is not given.
.RS
.RE
.TP
.B \-\-gpgkey FINGERPRINT
Specify GPG key to use when caching password, where \f[I]FINGERPRINT\f[]
is the fingerprint of the GPG key.
\f[I]passhole\f[] defaults to the first key in the keychain.
Use \[aq]gpg \-\-list\-keys \-\-fingerprint\[aq] to get a list of keys
and their fingerprints.
No effect if \-\-database is not given.
.RS
.RE
.TP
.B \-v, \-\-version
Print out version information.
.RS
.RE
.SH Files
.TP
.B ~/.config/passhole.ini
Default location of config.
Specify multiple databases here or edit the default paths of the default
database.
See the config section for supported directives.
.RS
.RE
.TP
.B ~/.passhole.kdbx
Default location of KeePass database.
Override with \-\-database \f[I]PATH\f[]
.RS
.RE
.TP
.B ~/.passhole.key
Default location KeePass key.
Override with \-\-keyfile \f[I]PATH\f[] or in config.
.RS
.RE
.TP
.B ~/.cache/passhole_cache
Default location where gpg\-agent temporarily caches the database
password.
Override with \-\-cache or in config.
.RS
.RE
.SH Multiple Databases
.PP
Multiple databases may be specified in the config.
Prefix group or entry paths with \f[B]\@[Name]/\f[], where
\f[I][Name]\f[] is the database name given in the config.
A path with no prefix is assumed to be the default database.
.IP
.nf
\f[C]
#\ move\ an\ entry\ in\ the\ *test*\ database\ to\ the\ default\ database.
$\ ph\ mv\ \@test/foobar_group/foobar_entry\ root_entry

#\ list\ the\ test\ database
$\ ph\ ls\ \@test/
\f[]
.fi
.SH Config
.PP
Each section in the config corresponds to a database.
The supported options are:
.TP
.B database: /path/to/example.kdbx
Required.
The path to the kdbx file.
.RS
.RE
.TP
.B keyfile: /path/to/example.key
Path to keyfile.
If not given, assume database has no keyfile.
.RS
.RE
.TP
.B cache: /path/to/example.cache
Where to cache encrypted password using GPG2.
\f[I]~/.cache/example_cache\f[] is a good choice.
If not given, don\[aq]t cache password.
.RS
.RE
.TP
.B no\-password: True
Assume database has no password and don\[aq]t prompt for it.
.RS
.RE
.SH Python Scripts
.PP
The \f[I]open_database\f[] function is available for import for
conveniently opening your database with password caching enabled.
.IP
.nf
\f[C]
from\ passhole.passhole\ import\ open_database
kp\ =\ open_database()
\f[]
.fi
.SH Examples
.SS add a new entry with manually created password
.IP
.nf
\f[C]
$\ ph\ add\ github

Username:\ Evidlo
Password:\ 
Confirm:\ 
URL:\ github.com
\f[]
.fi
.SS add an entry with a generated alphanumeric password
.IP
.nf
\f[C]
$\ ph\ add\ neopets\ \-a
Username:\ Evidlo
URL:\ neopets.com
\f[]
.fi
.SS add a new group
.IP
.nf
\f[C]
$\ ph\ add\ social/
\f[]
.fi
.SS add an entry to social/ with a 32 character password (alphanumeric +
symbols)
.IP
.nf
\f[C]
$\ ph\ add\ social/facebook\ \-s\ 32
Username:\ evan\@evanw.org
URL:\ facebook.com
\f[]
.fi
.SS add an entry to social/ with a correct\-horse\-battery\-staple type
password
.IP
.nf
\f[C]
$\ ph\ add\ social/twitter\ \-w
Username:\ evan\@evanw.org
URL:\ twitter.com
\f[]
.fi
.SS list all entries
.IP
.nf
\f[C]
$\ ph\ list
github
neopets
[social]
├──\ facebook
└──\ twitter
\f[]
.fi
.SS display contents of entry
.IP
.nf
\f[C]
$\ ph\ show\ social/twitter
Title:\ twitter
Username:\ Evidlo
Password:\ inns.ambien.travelling.throw.force
URL:\ twitter.com
\f[]
.fi
.SS retrieve contents of specific field for use in scripts
.IP
.nf
\f[C]
$\ ph\ show\ social/twitter\ \-\-field\ password
inns.ambien.travelling.throw.force
\f[]
.fi
.SH AUTHORS
Evan Widloski.
